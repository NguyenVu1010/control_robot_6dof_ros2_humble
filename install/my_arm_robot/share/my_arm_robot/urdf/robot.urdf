<?xml version="1.0" encoding="utf-8"?>
<!-- This URDF was automatically created by SolidWorks to URDF Exporter! Originally created by Stephen Brawner (brawner@gmail.com) 
     Commit Version: 1.6.0-1-g15f4949  Build Version: 1.6.7594.29634
     For more information, please see http://wiki.ros.org/sw_urdf_exporter -->
<robot name="robot">

  <!-- ======================================================================== -->
  <!-- 1. THÊM LINK WORLD ĐỂ CỐ ĐỊNH ROBOT                                      -->
  <!-- ======================================================================== -->
  <link name="world"/>

  <joint name="world_joint" type="fixed">
    <parent link="world"/>
    <child link="base_link"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <!-- ======================================================================== -->
  <!-- 2. CÁC LINK VÀ JOINT CỦA ROBOT (GIỮ NGUYÊN TỪ SOLIDWORKS)                -->
  <!-- ======================================================================== -->
  <link name="base_link">
    <inertial>
      <origin xyz="6.6779E-08 1.1711E-07 0.051416" rpy="0 0 0" />
      <mass value="0.35438" />
      <inertia ixx="0.00044121" ixy="-5.4847E-09" ixz="2.2395E-10" iyy="0.00044121" iyz="3.7442E-10" izz="0.0004697" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/base_link.STL" />
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>

  <link name="Link_1">
    <inertial>
      <origin xyz="-2.7456E-07 -0.019979 0.049934" rpy="0 0 0" />
      <mass value="0.29405" />
      <inertia ixx="0.00018379" ixy="-7.5691E-10" ixz="-2.3852E-11" iyy="0.00020053" iyz="2.2396E-05" izz="0.0002036" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Link_1.STL" />
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Link_1.STL" />
      </geometry>
    </collision>
  </link>

  <joint name="Link_1_joint" type="revolute">
    <origin xyz="0 0 0.109" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="Link_1" />
    <axis xyz="0 0 1" />
    <limit lower="-3.14" upper="3.14" effort="100" velocity="0" />
  </joint>

  <link name="Link_2">
    <inertial>
      <origin xyz="0.064128 -0.066552 0.004546" rpy="0 0 0" />
      <mass value="0.56692" />
      <inertia ixx="0.0010005" ixy="0.00048662" ixz="2.4422E-10" iyy="0.00096441" iyz="1.0158E-10" izz="0.0015033" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Link_2.STL" />
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Link_2.STL" />
      </geometry>
    </collision>
  </link>

  <joint name="Link_2_joint" type="revolute">
    <origin xyz="0 -0.0715 0.0645" rpy="1.5708 -1.5708 0" />
    <parent link="Link_1" />
    <child link="Link_2" />
    <axis xyz="0 0 -1" />
    <limit lower="-1.57" upper="1.57" effort="100" velocity="0" />
  </joint>

  <link name="Link_3">
    <inertial>
      <origin xyz="0.074283 -0.010346 0.058914" rpy="0 0 0" />
      <mass value="0.28134" />
      <inertia ixx="0.00031192" ixy="4.1644E-05" ixz="-2.3689E-09" iyy="0.00060517" iyz="-9.6672E-09" izz="0.00065885" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Link_3.STL" />
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Link_3.STL" />
      </geometry>
    </collision>
  </link>

  <joint name="Link_3_joint" type="revolute">
    <origin xyz="0.10408 -0.10802 0" rpy="-3.1416 0 -1.5708" />
    <parent link="Link_2" />
    <child link="Link_3" />
    <axis xyz="0 0 1" />
    <limit lower="-2.5" upper="2.5" effort="100" velocity="0" />
  </joint>

  <link name="Link_4">
    <inertial>
      <origin xyz="0.0012985 -0.00015327 -0.0071039" rpy="0 0 0" />
      <mass value="0.24763" />
      <inertia ixx="0.0001477" ixy="-4.322E-07" ixz="-2.5263E-05" iyy="0.00014409" iyz="2.9843E-06" izz="0.00015439" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Link_4.STL" />
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Link_4.STL" />
      </geometry>
    </collision>
  </link>

  <joint name="Link_4_joint" type="revolute">
    <origin xyz="0.14857 -0.020684 0" rpy="3.1416 0 0" />
    <parent link="Link_3" />
    <child link="Link_4" />
    <axis xyz="0 0 -1" />
    <limit lower="-3.14" upper="3.14" effort="100" velocity="0" />
  </joint>

  <link name="Link_5">
    <inertial>
      <origin xyz="0.0013072 1.0291E-07 -0.0071052" rpy="0 0 0" />
      <mass value="0.24762" />
      <inertia ixx="0.00014775" ixy="5.8014E-10" ixz="-2.5434E-05" iyy="0.00014403" iyz="7.31E-10" izz="0.00015439" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Link_5.STL" />
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Link_5.STL" />
      </geometry>
    </collision>
  </link>

  <joint name="Link_5_joint" type="revolute">
    <origin xyz="0.071006 -0.008387 0.047" rpy="-1.5708 0.23999 -1.6884" />
    <parent link="Link_4" />
    <child link="Link_5" />
    <axis xyz="0 0 -1" />
    <limit lower="-2" upper="2" effort="100" velocity="0" />
  </joint>

  <link name="Link_6">
    <inertial>
      <origin xyz="-1.5424E-08 -3.6987E-07 -0.037505" rpy="0 0 0" />
      <mass value="0.13168" />
      <inertia ixx="4.0898E-05" ixy="-6.0382E-10" ixz="-2.0928E-11" iyy="4.0886E-05" iyz="-4.3595E-10" izz="4.6676E-05" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Link_6.STL" />
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Link_6.STL" />
      </geometry>
    </collision>
  </link>

  <joint name="Link_6_joint" type="revolute">
    <origin xyz="0.0715 0 0.047" rpy="1.5708 -0.54029 1.5708" />
    <parent link="Link_5" />
    <child link="Link_6" />
    <axis xyz="0 0 -1" />
    <limit lower="-3.14" upper="3.14" effort="100" velocity="0" />
  </joint>

  <link name="Gap_base">
    <inertial>
      <origin xyz="0.0010196 -7.3453E-05 0.02853" rpy="0 0 0" />
      <mass value="0.021278" />
      <inertia ixx="5.4085E-06" ixy="-4.604E-15" ixz="-9.6308E-16" iyy="3.6139E-06" iyz="-9.1731E-08" izz="2.6224E-06" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Gap_base.STL" />
      </geometry>
      <material name="">
        <color rgba="0.79216 0.81961 0.92941 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Gap_base.STL" />
      </geometry>
    </collision>
  </link>

  <joint name="Gap_base_joint" type="fixed">
    <origin xyz="0 0 0.0075" rpy="0 0 0.055716" />
    <parent link="Link_6" />
    <child link="Gap_base" />
    <axis xyz="0 0 0" />
  </joint>

  <link name="Gap_motor">
    <inertial>
      <origin xyz="2.9875E-05 0.0032394 -0.019699" rpy="0 0 0" />
      <mass value="0.0050243" />
      <inertia ixx="2.115E-07" ixy="-8.3866E-10" ixz="1.2364E-11" iyy="1.2027E-07" iyz="1.2976E-09" izz="2.3067E-07" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Gap_motor.STL" />
      </geometry>
      <material name="">
        <color rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/Gap_motor.STL" />
      </geometry>
    </collision>
  </link>

  <joint name="gripper_motor_joint" type="revolute">
    <origin xyz="0.00697 0.0075 0.0246" rpy="-1.5708 -1.5616 -1.5708" />
    <parent link="Gap_base" />
    <child link="Gap_motor" />
    <axis xyz="0 0 -1" />
    <limit lower="-1" upper="1" effort="50" velocity="2" />
  </joint>

  <link name="left_finger">
    <inertial>
      <origin xyz="0.022376 -0.0034492 -0.007" rpy="0 0 0" />
      <mass value="0.0030919" />
      <inertia ixx="8.1297E-08" ixy="1.9967E-07" ixz="4.9631E-24" iyy="8.4884E-07" iyz="1.3235E-23" izz="9.1515E-07" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/left_finger.STL" />
      </geometry>
      <material name="">
        <color rgba="0.79216 0.81961 0.92941 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/left_finger.STL" />
      </geometry>
    </collision>
  </link>

  <joint name="left_finger_joint" type="revolute">
    <origin xyz="0.00697 0.037986 0.063612" rpy="-1.5708 -1.1862 -1.5708" />
    <parent link="Gap_base" />
    <child link="left_finger" />
    <axis xyz="0 0 -1" />
    <limit lower="-0.8" upper="0.8" effort="100" velocity="2.0" />
  </joint>

  <link name="right_finger">
    <inertial>
      <origin xyz="0.022376 0.0034492 -0.007" rpy="0 0 0" />
      <mass value="0.0030919" />
      <inertia ixx="8.1297E-08" ixy="-1.9967E-07" ixz="6.7829E-23" iyy="8.4884E-07" iyz="2.647E-23" izz="9.1515E-07" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/right_finger.STL" />
      </geometry>
      <material name="">
        <color rgba="0.64706 0.61961 0.58431 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://my_arm_robot/meshes/right_finger.STL" />
      </geometry>
    </collision>
  </link>

  <joint name="right_finger_joint" type="revolute">
    <origin xyz="0.00697 -0.037923 0.063692" rpy="1.5708 -1.1862 1.5708" />
    <parent link="Gap_base" />
    <child link="right_finger" />
    <axis xyz="0 0 -1" />
    <limit lower="-0.8" upper="0.8" effort="100" velocity="2.0" />
    <mimic joint="left_finger_joint" multiplier="-1" offset="0" />
  </joint>

  <!-- ======================================================================== -->
  <!-- 3. CẤU HÌNH ROS2 CONTROL (MOCK HARDWARE)                                 -->
  <!-- ======================================================================== -->
  <ros2_control name="RobotSystem" type="system">
    <hardware>
      <!-- Dùng Mock Hardware để test logic controller mà không cần robot thật -->
      <plugin>mock_components/GenericSystem</plugin>
      <!-- Tính toán động học tích phân (Position += Velocity * dt) -->
      <param name="calculate_dynamics">true</param>
    </hardware>

    <!-- 6 Khớp của Robot Arm: Điều khiển VẬN TỐC (Velocity) cho bài toán Inverse Kinematics -->
    <joint name="Link_1_joint">
      <command_interface name="velocity"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    
    <joint name="Link_2_joint">
      <command_interface name="velocity"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>

    <joint name="Link_3_joint">
      <command_interface name="velocity"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>

    <joint name="Link_4_joint">
      <command_interface name="velocity"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>

    <joint name="Link_5_joint">
      <command_interface name="velocity"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>

    <joint name="Link_6_joint">
      <command_interface name="velocity"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>

    <!-- Khớp kẹp (Gripper): Điều khiển VỊ TRÍ (Position) -->
    <!-- Thường dùng cho Gripper Action Controller -->
    
    <joint name="gripper_motor_joint">
      <command_interface name="position"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>

    <joint name="left_finger_joint">
      <command_interface name="position"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <!-- right_finger_joint là khớp mimic nên không cần control trực tiếp, state publisher sẽ tự tính -->

  </ros2_control>

</robot>